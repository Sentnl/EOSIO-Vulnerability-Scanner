FROM python:3.9-slim

LABEL "com.github.actions.name"="EOSIO Vulnerability Scanner"
LABEL "com.github.actions.description"="Scan EOSIO files for vulnerabilities using the OpenAI API"
LABEL "com.github.actions.icon"="search"
LABEL "com.github.actions.color"="blue"
LABEL "com.github.actions.inputs.openai_api_key.description"="Your OpenAI API key"
LABEL "com.github.actions.inputs.openai_api_key.required"="true"
LABEL "com.github.actions.inputs.engine.description"="The engine identifier for the OpenAI API (e.g., 'text-davinci-002' or 'gpt-4-variant')"
LABEL "com.github.actions.inputs.engine.required"="true"

RUN apt-get update && \
    apt-get install -y --no-install-recommends \
        libclang-dev \
        llvm-dev \
    && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

RUN pip install openai reportlab "clang==11.*" #3.9=slim installs clang11

COPY scan_eosio.py /scan_eosio.py
ENTRYPOINT ["python", "/scan_eosio.py"]


